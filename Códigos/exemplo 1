# -*- coding: utf-8 -*-
"""
Created on Sun Oct  1 16:27:58 2017

@author: Usuario
"""
while True:
    #esse for é para clear. Tem que fazer isso para cada iteração
    for name in dir():
        if not name.startswith('_'):
            del globals()[name]
           
    #importar os modules relevantes        
    from pylab import *
    from rtlsdr import *

    
    sdr = RtlSdr()

    # configure device
    sdr.sample_rate = 1.0e6
    sdr.center_freq = 433.92e6
    sdr.gain = 4

    #ter acesso Às amostras
    samples = sdr.read_samples(256*1024)
    
    #obter a soma dos quadrados das samples. Serve como uma espécie de "integração"
    #para se detectar o sinal. Porém, não funciona pois não obtemos amostras rápido
    #o suficiente
    soma=0
    for i in samples:
        sum_quad=sum_quad+(pow(abs(i),2))
        soma=soma+abs(i)

    # use matplotlib to estimate and plot the PSD
    psd(samples, NFFT=1024, Fs=sdr.sample_rate/1e6, Fc=sdr.center_freq/1e6)
    xlabel('Frequency (MHz)')
    ylabel('Relative power (dB)')

    show()
